<!DOCTYPE HTML>
<html>

<head>
<title>Lost and Found</title>

	<!-- Taken out for now, fix later
	<link rel="stylesheet" href="css/leaflet.css" />
    <link rel="stylesheet" href="css/main.css" />
	<script src="js/leaflet/leaflet-src.js"></script>
    <script src="js/map.js"></script>
    <script src="js/marker.js"></script> -->

	<!-- Reference taken from http://uafrazier.github.io/leaflet-basics/. It references to the hosted Leaflet files -->
	<!--<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />

	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>-->

	<!-- Tutorial: http://leafletjs.com/examples/quick-start/ -->
	<!-- Popup reference: http://bl.ocks.org/uafrazier/d589caa322f1b1e7c651 -->

	<!-- Leaflet.Draw plugin. -->
	<meta charset="UTF-8">

    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="leaflet_Draw/Leaflet.draw-master/docs/examples/libs/leaflet.css"/>
    <link rel= "stylesheet" href = "leaflet_Draw/Leaflet.draw-master/src/leaflet.draw.css"></script>

    <script src="leaflet_Draw/Leaflet.draw-master/docs/examples/libs/leaflet-src.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/Leaflet.draw.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/Leaflet.Draw.Event.js"></script>

    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/handler/Edit.Poly.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/handler/Edit.SimpleShape.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/handler/Edit.Circle.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/handler/Edit.Rectangle.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/handler/Edit.Marker.js"></script>

    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/handler/Draw.Feature.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/handler/Draw.Polyline.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/handler/Draw.Polygon.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/handler/Draw.SimpleShape.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/handler/Draw.Rectangle.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/handler/Draw.Circle.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/handler/Draw.Marker.js"></script>

    <script src="leaflet_Draw/Leaflet.draw-master/src/ext/TouchEvents.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/ext/LatLngUtil.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/ext/GeometryUtil.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/ext/LineUtil.Intersect.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/ext/Polyline.Intersect.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/ext/Polygon.Intersect.js"></script>

    <script src="leaflet_Draw/Leaflet.draw-master/src/Control.Draw.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/Tooltip.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/Toolbar.js"></script>

    <script src="leaflet_Draw/Leaflet.draw-master/src/draw/DrawToolbar.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/EditToolbar.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/handler/EditToolbar.Edit.js"></script>
    <script src="leaflet_Draw/Leaflet.draw-master/src/edit/handler/EditToolbar.Delete.js"></script> 


    <!-- Boostrap files link at: https://v4-alpha.getbootstrap.com/getting-started/introduction/
	This allows us to use the Bootstrap functions-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

      <!-- Access the jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
</head>
</head>

<body>

     <!-- Kandarp and Alok helped us here. -->
    <% for(var i=0; i<data.length; i++) {%>
       <p><%= data[i].item_name %></p>
    <% } %> 

    
	<!-- Followed official bootstrap to make a navigation bar. It's basic, so hopefully we will upgrade later.
    https://v4-alpha.getbootstrap.com/components/navbar/ -->
	<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
 	 <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    	<span class="navbar-toggler-icon"></span>
  	</button>
  	<a class="navbar-brand" href="index.html">Lost and Found</a>
  	<div class="collapse navbar-collapse" id="navbarNav">
    	<ul class="navbar-nav">
      		<li class="nav-item active">
        		<a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
      		</li>
      		<li class="nav-item">
        		<a class="nav-link" href="lostForm.html">Lost</a>
      		</li>
      		<li class="nav-item">
        		<a class="nav-link" href="foundForm.html">Found</a>
      		</li>
      		<li class="nav-item">
        		<a class="nav-link disabled" href="#">My Profile</a>
      		</li>
    	</ul>
  	</div>
	</nav>

	<!-- Usage of typography: https://v4-alpha.getbootstrap.com/content/typography/ -->
	<section><p><b>Use the toolbar buttons on the left to specify the location where the item was lost or found. The buttons are as follows:</b></p>
    <p>- Polyline: Draw a path
    <p>- Circle: Create a general area
    <p>- Marker: Place an exact point
        <p>Any mistakes can be edited with the two buttons in the bottom toolbar. Just remember to click save if you make an edit.
	</section>
<!-- Leaflet guide from tutorial: http://leafletjs.com/examples/quick-start/ -->
	<div id ="lostMap"></div>
   
    <div id="search">
        <input type="text" name="addr" value="" id="addr" size="10" />
        <button type="button" onclick="addr_search();">Search</button>
        <div id="results"/>
    </div>
        
    <script src="js/index.js"></script>

</body>
    
<footer>

    <div id = "foundDiv">

        <!--Inkan: Moved found form to bottom of the page, it allows the form to submit and post onto the front page as a list. -->

        <!-- Form tutorial link: https://www.tutorialspoint.com/html/html_forms.htm -->
        <!-- Tutorial for forms: https://www.w3schools.com/js/js_input_examples.asp -->
        <!-- Tutorial for php and forms: https://www.w3schools.com/php/php_forms.asp -->
        <form id ="found_Form">
            <p>Found Form</p>
            Item Name: <input type ="text" name="item_name" id = "item_name"></text>
            <br>
            Description
            <br>
            <textarea rows="6" cols="20" name = "description" id = "description"></textarea>
            <!--<br>
            <input type =  "file" name = "fileupload" accept = "image/*" id = "picture"></text>
            <br>-->
            <p>If you lost this item, please contact:</p>
            <br>
            Full Name: <input type ="text" name = "full_name" id ="full_name"></input>
            <br>
            Phone number: <input type = "text" name = "phone_number" id = "phone_number"></input> 
            <br>
            Email: <input type = "text" name = "email" id = "email"></input>
            <br>
            <!-- Make a submit button : https://www.w3schools.com/tags/att_button_formmethod.asp-->
            <input type = "submit" name = "Post Found Item" value ="submit" id ="submit_Id"></input>
        </form>

        <script>
        function postFound()
        {
            //Chen helped here
            console.log("in postfound function");
            $.ajax({
                url: "/ajax/found?action=foundItem",
                type: "post",
                data: {
                    item_name: $("#item_name").val(),
                    description: $("#description").val(),
                    full_name: $("#full_name").val(),
                    phone_number: $("#phone_number").val(),
                    email: $("#email").val()
                    },
            success: function(data)
            {
                alert("Post saved.");
            }
        });
    }

   $("#found_Form").submit(function(){

        postFound();
        return false;
    });
    </script>
        <!-- Kandarp and Alok helped us here. -->
         <!-- Making lists: https://v4-alpha.getbootstrap.com/components/list-group/ -->
        <ul class="list-group">
            <% for(var i=0; i<data.length; i++) {%>
            <li class = "list-group-item">
                Item Name: <%= data[i].item_name %>
            <br><%= data[i].description %></br>
            <br>Name: <%= data[i].full_name %></br>
            <br>Phone Number: <%= data[i].phone_number %></br>
            <br>Email: <%= data[i].email %></br></li>
            <% } %>
        </ul>
    </div>
</footer>
    
    
</html> 
